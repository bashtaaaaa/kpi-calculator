<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Система KPI Bashta Media - Полная версия</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1600px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0,0,0,0.15);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 3em;
            font-weight: 300;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-top: 10px;
        }
        
        .position-nav {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 1px solid #dee2e6;
            overflow-x: auto;
        }
        
        .nav-buttons {
            display: flex;
            gap: 10px;
            min-width: max-content;
        }
        
        .nav-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            background: #e9ecef;
            color: #495057;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .nav-btn:hover {
            background: #4CAF50;
            color: white;
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: #4CAF50;
            color: white;
            box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);
        }
        
        .position-section {
            display: none;
            padding: 30px;
        }
        
        .position-section.active {
            display: block;
        }
        
        .position-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-radius: 15px;
            border: 2px solid #2196F3;
        }
        
        .position-title {
            font-size: 2em;
            font-weight: 600;
            color: #1976d2;
            margin: 0;
        }
        
        .position-badge {
            background: #2196F3;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 600;
        }
        
        .kpi-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .kpi-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 18px 12px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            border-right: 1px solid rgba(255,255,255,0.2);
        }
        
        .kpi-table th:last-child {
            border-right: none;
        }
        
        .kpi-table td {
            padding: 15px 12px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
            border-right: 1px solid #e9ecef;
            font-size: 13px;
        }
        
        .kpi-table td:last-child {
            border-right: none;
        }
        
        .kpi-table tbody tr:hover {
            background: #f8f9fa;
            transform: scale(1.01);
            transition: all 0.3s ease;
        }
        
        .kpi-name {
            text-align: left;
            font-weight: 600;
            color: #333;
            max-width: 200px;
        }
        
        .kpi-formula {
            text-align: left;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #666;
            max-width: 250px;
        }
        
        .metric-value {
            font-weight: 600;
            color: #2196F3;
        }
        
        .points-value {
            font-weight: 600;
            color: #4CAF50;
            font-size: 16px;
        }
        
        .weight-value {
            font-weight: 600;
            color: #FF9800;
        }
        
        .bonus-summary {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #ffc107;
        }
        
        .bonus-title {
            font-size: 1.8em;
            color: #856404;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        
        .bonus-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        .bonus-table th,
        .bonus-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #dee2e6;
        }
        
        .bonus-table th {
            background: #ffc107;
            color: #856404;
            font-weight: 600;
        }
        
        .status-fire { background: #ffebee; color: #c62828; }
        .status-excellent { background: #e8f5e9; color: #2e7d32; }
        .status-good { background: #e3f2fd; color: #1565c0; }
        .status-warning { background: #fff3e0; color: #ef6c00; }
        .status-danger { background: #ffebee; color: #c62828; }
        
        .calculator-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #28a745;
        }
        
        .calculator-title {
            font-size: 1.8em;
            color: #28a745;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
        }
        
        .calculator-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .calc-input {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .calc-input label {
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }
        
        .calc-input input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .calc-input input:focus {
            outline: none;
            border-color: #28a745;
            box-shadow: 0 0 8px rgba(40, 167, 69, 0.3);
        }
        
        .calc-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 20px auto;
            display: block;
        }
        
        .calc-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(40, 167, 69, 0.4);
        }
        
        .result-section {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            display: none;
        }
        
        .result-section.show {
            display: block;
        }
        
        .result-points {
            font-size: 3em;
            font-weight: 300;
            margin-bottom: 10px;
        }
        
        .result-status {
            font-size: 1.5em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .result-bonus {
            font-size: 2em;
            font-weight: 600;
            margin-top: 15px;
        }
        
        .methodology {
            background: #e8f5e8;
            padding: 25px;
            border-radius: 15px;
            margin: 30px 0;
            border: 2px solid #4CAF50;
        }
        
        .methodology h3 {
            color: #2e7d32;
            font-size: 1.5em;
            margin-bottom: 15px;
        }
        
        .methodology p {
            color: #388e3c;
            line-height: 1.6;
            margin-bottom: 10px;
        }
        
        .export-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 30px 0;
        }
        
        .export-btn {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(23, 162, 184, 0.4);
        }
        
        @media (max-width: 768px) {
            .kpi-table {
                font-size: 12px;
            }
            
            .kpi-table th,
            .kpi-table td {
                padding: 10px 8px;
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎯 Система KPI Bashta Media</h1>
            <div class="subtitle">Полная система оценки эффективности сотрудников</div>
        </div>
        
        <div class="position-nav">
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showPosition('editor-ru')">📝 Редактор RU</button>
                <button class="nav-btn" onclick="showPosition('editor-kg')">📝 Редактор KG</button>
                <button class="nav-btn" onclick="showPosition('scriptwriter')">🎬 Сценарист</button>
                <button class="nav-btn" onclick="showPosition('operator')">📹 Оператор</button>
                <button class="nav-btn" onclick="showPosition('smm')">📱 SMM</button>
                <button class="nav-btn" onclick="showPosition('commerce')">💼 Коммерция</button>
                <button class="nav-btn" onclick="showPosition('factchecker')">✅ Фактчекер</button>
                <button class="nav-btn" onclick="showPosition('administration')">⚙️ Администрация</button>
            </div>
        </div>
        
        <!-- Редактор RU -->
        <div id="editor-ru" class="position-section active">
            <div class="position-header">
                <h2 class="position-title">📝 Редактор/ка (Русский контент)</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Вовлеченность аудитории</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">3%</td>
                        <td class="metric-value">5%</td>
                        <td class="metric-value">7%</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">(лайки + комменты + сохранения) / охват × 100</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Охваты постов</td>
                        <td class="metric-value">тыс.</td>
                        <td class="metric-value">40</td>
                        <td class="metric-value">50</td>
                        <td class="metric-value">70</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Среднее значение охватов всех постов за месяц</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Количество материалов</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">10</td>
                        <td class="metric-value">12</td>
                        <td class="metric-value">15</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Количество опубликованных постов за месяц</td>
                        <td>Контент-план</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Рост аудитории</td>
                        <td class="metric-value">чел.</td>
                        <td class="metric-value">400</td>
                        <td class="metric-value">500</td>
                        <td class="metric-value">800</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Новые подписчики за месяц (органические)</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение плана</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">90%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Опубликовано вовремя / Запланировано × 100</td>
                        <td>Контент-план</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Вовлеченность (%)</label>
                        <input type="number" id="ru-engagement" step="0.1" placeholder="5.0">
                    </div>
                    <div class="calc-input">
                        <label>Охваты (тыс.)</label>
                        <input type="number" id="ru-reach" placeholder="50">
                    </div>
                    <div class="calc-input">
                        <label>Количество материалов</label>
                        <input type="number" id="ru-materials" placeholder="12">
                    </div>
                    <div class="calc-input">
                        <label>Рост аудитории</label>
                        <input type="number" id="ru-growth" placeholder="500">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение плана (%)</label>
                        <input type="number" id="ru-schedule" placeholder="95">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateRU()">🔢 Рассчитать KPI</button>
                
                <div id="ru-result" class="result-section">
                    <div class="result-points" id="ru-points">0%</div>
                    <div class="result-status" id="ru-status">Введите данные</div>
                    <div class="result-bonus" id="ru-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- Редактор KG -->
        <div id="editor-kg" class="position-section">
            <div class="position-header">
                <h2 class="position-title">📝 Редактор/ка (Кыргызский контент)</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Вовлеченность аудитории</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">4%</td>
                        <td class="metric-value">5%</td>
                        <td class="metric-value">7%</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">(лайки + комменты + сохранения) / охват × 100</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Охваты постов</td>
                        <td class="metric-value">тыс.</td>
                        <td class="metric-value">25</td>
                        <td class="metric-value">35</td>
                        <td class="metric-value">50</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Среднее значение охватов всех постов за месяц</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Количество материалов</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">6</td>
                        <td class="metric-value">7</td>
                        <td class="metric-value">9</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Количество опубликованных постов за месяц</td>
                        <td>Контент-план</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Рост аудитории</td>
                        <td class="metric-value">чел.</td>
                        <td class="metric-value">200</td>
                        <td class="metric-value">300</td>
                        <td class="metric-value">500</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Новые подписчики за месяц (органические)</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение плана</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">90%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Опубликовано вовремя / Запланировано × 100</td>
                        <td>Контент-план</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Вовлеченность (%)</label>
                        <input type="number" id="kg-engagement" step="0.1" placeholder="5.0">
                    </div>
                    <div class="calc-input">
                        <label>Охваты (тыс.)</label>
                        <input type="number" id="kg-reach" placeholder="35">
                    </div>
                    <div class="calc-input">
                        <label>Количество материалов</label>
                        <input type="number" id="kg-materials" placeholder="7">
                    </div>
                    <div class="calc-input">
                        <label>Рост аудитории</label>
                        <input type="number" id="kg-growth" placeholder="300">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение плана (%)</label>
                        <input type="number" id="kg-schedule" placeholder="95">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateKG()">🔢 Рассчитать KPI</button>
                
                <div id="kg-result" class="result-section">
                    <div class="result-points" id="kg-points">0%</div>
                    <div class="result-status" id="kg-status">Введите данные</div>
                    <div class="result-bonus" id="kg-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- Сценарист -->
        <div id="scriptwriter" class="position-section">
            <div class="position-header">
                <h2 class="position-title">🎬 Сценарист/ка</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Качество сценариев</td>
                        <td class="metric-value">балл</td>
                        <td class="metric-value">7</td>
                        <td class="metric-value">8</td>
                        <td class="metric-value">9</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Средняя оценка редактора по шкале 1-10</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Количество сценариев</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">6</td>
                        <td class="metric-value">8</td>
                        <td class="metric-value">10</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Количество готовых сценариев за месяц</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Процент принятых сценариев</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">80%</td>
                        <td class="metric-value">90%</td>
                        <td class="metric-value">95%</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Принятые сценарии / Всего сценариев × 100</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Креативные предложения</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">3</td>
                        <td class="metric-value">4</td>
                        <td class="metric-value">6</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Реализованные авторские темы за месяц</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение дедлайнов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">85%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Сданы вовремя / Всего заданий × 100</td>
                        <td>Учет проектов</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Качество (балл 1-10)</label>
                        <input type="number" id="scr-quality" min="1" max="10" step="0.1" placeholder="8.0">
                    </div>
                    <div class="calc-input">
                        <label>Количество сценариев</label>
                        <input type="number" id="scr-count" placeholder="8">
                    </div>
                    <div class="calc-input">
                        <label>Процент принятых (%)</label>
                        <input type="number" id="scr-accepted" placeholder="90">
                    </div>
                    <div class="calc-input">
                        <label>Креативные предложения</label>
                        <input type="number" id="scr-creative" placeholder="4">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение дедлайнов (%)</label>
                        <input type="number" id="scr-deadline" placeholder="95">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateScriptwriter()">🔢 Рассчитать KPI</button>
                
                <div id="scr-result" class="result-section">
                    <div class="result-points" id="scr-points">0%</div>
                    <div class="result-status" id="scr-status">Введите данные</div>
                    <div class="result-bonus" id="scr-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- Оператор -->
        <div id="operator" class="position-section">
            <div class="position-header">
                <h2 class="position-title">📹 Оператор/ка-монтажер/ка</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Среднее время монтажа</td>
                        <td class="metric-value">дни</td>
                        <td class="metric-value">1.5</td>
                        <td class="metric-value">1.0</td>
                        <td class="metric-value">0.5</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Среднее время от получения материала до готовности</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Количество видео</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">6</td>
                        <td class="metric-value">8</td>
                        <td class="metric-value">10</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Количество готовых видео за месяц</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Техническое качество</td>
                        <td class="metric-value">балл</td>
                        <td class="metric-value">7</td>
                        <td class="metric-value">8</td>
                        <td class="metric-value">9</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Средняя оценка технического качества по шкале 1-10</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Креативность</td>
                        <td class="metric-value">балл</td>
                        <td class="metric-value">7</td>
                        <td class="metric-value">8</td>
                        <td class="metric-value">9</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Средняя оценка креативности по шкале 1-10</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение дедлайнов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">85%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Сданы вовремя / Всего заданий × 100</td>
                        <td>Учет проектов</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Среднее время (дни)</label>
                        <input type="number" id="op-time" step="0.1" placeholder="1.0">
                    </div>
                    <div class="calc-input">
                        <label>Количество видео</label>
                        <input type="number" id="op-count" placeholder="8">
                    </div>
                    <div class="calc-input">
                        <label>Техническое качество (1-10)</label>
                        <input type="number" id="op-quality" min="1" max="10" step="0.1" placeholder="8.0">
                    </div>
                    <div class="calc-input">
                        <label>Креативность (1-10)</label>
                        <input type="number" id="op-creativity" min="1" max="10" step="0.1" placeholder="8.0">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение дедлайнов (%)</label>
                        <input type="number" id="op-deadline" placeholder="95">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateOperator()">🔢 Рассчитать KPI</button>
                
                <div id="op-result" class="result-section">
                    <div class="result-points" id="op-points">0%</div>
                    <div class="result-status" id="op-status">Введите данные</div>
                    <div class="result-bonus" id="op-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- SMM -->
        <div id="smm" class="position-section">
            <div class="position-header">
                <h2 class="position-title">📱 SMM-менеджер/ка</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Качество работы</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">70%</td>
                        <td class="metric-value">80%</td>
                        <td class="metric-value">90%</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Внутренняя оценка редактора</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Рост охвата сторисов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">8%</td>
                        <td class="metric-value">10%</td>
                        <td class="metric-value">15%</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Рост охвата сторисов к предыдущему месяцу</td>
                        <td>Instagram Insights</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Количество сторисов</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">12</td>
                        <td class="metric-value">15</td>
                        <td class="metric-value">20</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Количество опубликованных сторисов за месяц</td>
                        <td>Контент-план</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Качество отчетов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">80%</td>
                        <td class="metric-value">90%</td>
                        <td class="metric-value">95%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Качество ежемесячных отчетов</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение графика</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">90%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Опубликовано вовремя / Запланировано × 100</td>
                        <td>Контент-план</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Качество работы (%)</label>
                        <input type="number" id="smm-quality" placeholder="80">
                    </div>
                    <div class="calc-input">
                        <label>Рост охвата сторисов (%)</label>
                        <input type="number" id="smm-growth" step="0.1" placeholder="10">
                    </div>
                    <div class="calc-input">
                        <label>Количество сторисов</label>
                        <input type="number" id="smm-stories" placeholder="15">
                    </div>
                    <div class="calc-input">
                        <label>Качество отчетов (%)</label>
                        <input type="number" id="smm-reports" placeholder="90">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение графика (%)</label>
                        <input type="number" id="smm-schedule" placeholder="95">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateSMM()">🔢 Рассчитать KPI</button>
                
                <div id="smm-result" class="result-section">
                    <div class="result-points" id="smm-points">0%</div>
                    <div class="result-status" id="smm-status">Введите данные</div>
                    <div class="result-bonus" id="smm-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- Коммерция -->
        <div id="commerce" class="position-section">
            <div class="position-header">
                <h2 class="position-title">💼 Рекламная менеджер/ка</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Доход от рекламы</td>
                        <td class="metric-value">евро</td>
                        <td class="metric-value">2000</td>
                        <td class="metric-value">2500</td>
                        <td class="metric-value">3500</td>
                        <td class="points-value">40</td>
                        <td class="weight-value">40%</td>
                        <td class="kpi-formula">Общий доход от рекламных кампаний за месяц</td>
                        <td>Финансовый учет</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Количество встреч</td>
                        <td class="metric-value">шт.</td>
                        <td class="metric-value">2</td>
                        <td class="metric-value">3</td>
                        <td class="metric-value">5</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Встречи с новыми потенциальными клиентами</td>
                        <td>CRM система</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Конверсия лидов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">25%</td>
                        <td class="metric-value">30%</td>
                        <td class="metric-value">40%</td>
                        <td class="points-value">20</td>
                        <td class="weight-value">20%</td>
                        <td class="kpi-formula">Заключенные контракты / Встречи × 100</td>
                        <td>CRM система</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение дедлайнов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">85%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Материалы сданы вовремя / Всего заказов × 100</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Качество отчетов</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">80%</td>
                        <td class="metric-value">90%</td>
                        <td class="metric-value">95%</td>
                        <td class="points-value">10</td>
                        <td class="weight-value">10%</td>
                        <td class="kpi-formula">Качество отчетов клиентам</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Доход (евро)</label>
                        <input type="number" id="com-revenue" placeholder="2500">
                    </div>
                    <div class="calc-input">
                        <label>Количество встреч</label>
                        <input type="number" id="com-meetings" placeholder="3">
                    </div>
                    <div class="calc-input">
                        <label>Конверсия лидов (%)</label>
                        <input type="number" id="com-conversion" step="0.1" placeholder="30">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение дедлайнов (%)</label>
                        <input type="number" id="com-deadline" placeholder="95">
                    </div>
                    <div class="calc-input">
                        <label>Качество отчетов (%)</label>
                        <input type="number" id="com-reports" placeholder="90">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateCommerce()">🔢 Рассчитать KPI</button>
                
                <div id="com-result" class="result-section">
                    <div class="result-points" id="com-points">0%</div>
                    <div class="result-status" id="com-status">Введите данные</div>
                    <div class="result-bonus" id="com-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- Фактчекер -->
        <div id="factchecker" class="position-section">
            <div class="position-header">
                <h2 class="position-title">✅ Фактчекер/ка</h2>
                <span class="position-badge">ЕЖЕМЕСЯЧНО</span>
            </div>
            
            <table class="kpi-table">
                <thead>
                    <tr>
                        <th>KPI</th>
                        <th>Единица</th>
                        <th>Минимум<br>(80%)</th>
                        <th>Цель<br>(100%)</th>
                        <th>Отлично<br>(120%)</th>
                        <th>Макс<br>баллы</th>
                        <th>Вес</th>
                        <th>Формула расчета</th>
                        <th>Источник</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="kpi-name">Покрытие проверки</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">40</td>
                        <td class="weight-value">40%</td>
                        <td class="kpi-formula">Проверенные материалы / Всего материалов × 100</td>
                        <td>Учет проектов</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Качество проверки</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">70%</td>
                        <td class="metric-value">80%</td>
                        <td class="metric-value">90%</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Внутренняя оценка редактора</td>
                        <td>Внутренняя оценка</td>
                    </tr>
                    <tr>
                        <td class="kpi-name">Соблюдение сроков</td>
                        <td class="metric-value">%</td>
                        <td class="metric-value">85%</td>
                        <td class="metric-value">95%</td>
                        <td class="metric-value">100%</td>
                        <td class="points-value">30</td>
                        <td class="weight-value">30%</td>
                        <td class="kpi-formula">Проверены вовремя / Всего заданий × 100</td>
                        <td>Учет проектов</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="calculator-section">
                <h3 class="calculator-title">📊 Калькулятор KPI</h3>
                <div class="calculator-grid">
                    <div class="calc-input">
                        <label>Покрытие проверки (%)</label>
                        <input type="number" id="fact-coverage" placeholder="100">
                    </div>
                    <div class="calc-input">
                        <label>Качество проверки (%)</label>
                        <input type="number" id="fact-quality" placeholder="80">
                    </div>
                    <div class="calc-input">
                        <label>Соблюдение сроков (%)</label>
                        <input type="number" id="fact-timing" placeholder="95">
                    </div>
                </div>
                <button class="calc-btn" onclick="calculateFactchecker()">🔢 Рассчитать KPI</button>
                
                <div id="fact-result" class="result-section">
                    <div class="result-points" id="fact-points">0%</div>
                    <div class="result-status" id="fact-status">Введите данные</div>
                    <div class="result-bonus" id="fact-bonus">0 сом</div>
                </div>
            </div>
        </div>
        
        <!-- Администрация -->
        <div id="administration" class="position-section">
            <div class="position-header">
                <h2 class="position-title">⚙️ Администрация</h2>
                <span class="position-badge">ПОЛУГОДИЕ</span>
            </div>
            
            <div class="methodology">
                <h3>📋 Административные KPI (оценка раз в полгода)</h3>
                <p><strong>CEO:</strong> Финансовая устойчивость, стратегическое развитие, HR</p>
                <p><strong>Главный редактор:</strong> Общий контроль контента, форматы, планирование</p>
                <p><strong>Операционный директор:</strong> Эффективность процессов, финансовая дисциплина</p>
                <p><strong>Главный видео-редактор:</strong> Техническое руководство, инновации</p>
                
                <p><em>Подробная система KPI для администрации разрабатывается индивидуально на основе стратегических целей компании.</em></p>
            </div>
        </div>
        
        <!-- Бонусная система -->
        <div class="bonus-summary">
            <h3 class="bonus-title">💰 Бонусная система за превышение плана</h3>
            <table class="bonus-table">
                <thead>
                    <tr>
                        <th>Процент выполнения</th>
                        <th>Статус</th>
                        <th>Бонус</th>
                        <th>Описание</th>
                    </tr>
                </thead>
                <tbody>
                    <tr class="status-fire">
                        <td>150%+</td>
                        <td>🔥 СУПЕР ОГОНЬ</td>
                        <td>25,000 сом</td>
                        <td>Выдающийся результат</td>
                    </tr>
                    <tr class="status-excellent">
                        <td>140-149%</td>
                        <td>⭐ ПРЕВОСХОДНО</td>
                        <td>20,000 сом</td>
                        <td>Значительное превышение</td>
                    </tr>
                    <tr class="status-excellent">
                        <td>130-139%</td>
                        <td>🚀 ОЧЕНЬ ХОРОШО</td>
                        <td>15,000 сом</td>
                        <td>Хорошее превышение</td>
                    </tr>
                    <tr class="status-good">
                        <td>120-129%</td>
                        <td>💪 ОТЛИЧНО</td>
                        <td>10,000 сом</td>
                        <td>Превышение целей</td>
                    </tr>
                    <tr class="status-good">
                        <td>110-119%</td>
                        <td>✅ ХОРОШО</td>
                        <td>5,000 сом</td>
                        <td>Небольшое превышение</td>
                    </tr>
                    <tr class="status-good">
                        <td>100-109%</td>
                        <td>👍 ПЛАН ВЫПОЛНЕН</td>
                        <td>0 сом</td>
                        <td>Выполнение плана</td>
                    </tr>
                    <tr class="status-warning">
                        <td>80-99%</td>
                        <td>⚠️ НЕ ДОРАБОТАЛ</td>
                        <td>0 сом</td>
                        <td>Не достиг целей</td>
                    </tr>
                    <tr class="status-danger">
                        <td>&lt;80%</td>
                        <td>💀 КРИТИЧНО</td>
                        <td>0 сом</td>
                        <td>Серьезные проблемы</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Методология -->
        <div class="methodology">
            <h3>📊 Методология расчета</h3>
            <p><strong>Формула итогового балла:</strong> Σ(KPI_балл × KPI_вес)</p>
            <p><strong>Расчет баллов за KPI:</strong> Если результат ≥ минимума, то балл = (результат ÷ минимум) × базовые_баллы</p>
            <p><strong>Максимальный балл:</strong> 130% от базовых баллов (при достижении уровня "Отлично")</p>
            <p><strong>Бонусы:</strong> Выплачиваются только за превышение плана (100%+) с шагом 10% по 5-10 тысяч сом</p>
            <p><strong>Источники данных:</strong> Instagram Insights, внутренняя система учета, CRM</p>
        </div>
        
        <!-- Экспорт -->
        <div class="export-section">
            <h3>📥 Экспорт данных</h3>
            <button class="export-btn" onclick="exportToExcel()">📊 Экспорт в Excel</button>
            <button class="export-btn" onclick="exportToPDF()">📄 Экспорт в PDF</button>
            <button class="export-btn" onclick="printReport()">🖨️ Печать отчета</button>
        </div>
    </div>
    
    <script>
        // Функции навигации
        function showPosition(positionId) {
            // Скрыть все секции
            document.querySelectorAll('.position-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Убрать активный класс у всех кнопок
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Показать выбранную секцию
            document.getElementById(positionId).classList.add('active');
            
            // Активировать соответствующую кнопку
            event.target.classList.add('active');
        }
        
        // Функции расчета KPI
        function calculateKPI(actual, minimum, target, excellent, maxPoints) {
            if (actual <= 0) return 0;
            
            if (actual >= excellent) {
                // Превышение отличного уровня - максимум 130%
                return Math.min(maxPoints * 1.3, maxPoints * (actual / target));
            } else if (actual >= target) {
                // Между целью и отличным - 100-120%
                const ratio = (actual - target) / (excellent - target);
                return maxPoints * (1 + ratio * 0.2);
            } else if (actual >= minimum) {
                // Между минимумом и целью - 80-100%
                const ratio = (actual - minimum) / (target - minimum);
                return maxPoints * (0.8 + ratio * 0.2);
            } else {
                // Ниже минимума - пропорционально снижение
                return Math.max(0, maxPoints * 0.8 * (actual / minimum));
            }
        }
        
        function getStatus(percentage) {
            if (percentage >= 150) return { text: '🔥 СУПЕР ОГОНЬ', class: 'status-fire' };
            if (percentage >= 140) return { text: '⭐ ПРЕВОСХОДНО', class: 'status-excellent' };
            if (percentage >= 130) return { text: '🚀 ОЧЕНЬ ХОРОШО', class: 'status-excellent' };
            if (percentage >= 120) return { text: '💪 ОТЛИЧНО', class: 'status-good' };
            if (percentage >= 110) return { text: '✅ ХОРОШО', class: 'status-good' };
            if (percentage >= 100) return { text: '👍 ПЛАН ВЫПОЛНЕН', class: 'status-good' };
            if (percentage >= 80) return { text: '⚠️ НЕ ДОРАБОТАЛ', class: 'status-warning' };
            return { text: '💀 КРИТИЧНО', class: 'status-danger' };
        }
        
        function getBonus(percentage) {
            if (percentage >= 150) return 25000;
            if (percentage >= 140) return 20000;
            if (percentage >= 130) return 15000;
            if (percentage >= 120) return 10000;
            if (percentage >= 110) return 5000;
            return 0; // Бонус только за превышение плана (100%+)
        }
        
        // Редактор RU
        function calculateRU() {
            const engagement = parseFloat(document.getElementById('ru-engagement').value) || 0;
            const reach = parseFloat(document.getElementById('ru-reach').value) || 0;
            const materials = parseFloat(document.getElementById('ru-materials').value) || 0;
            const growth = parseFloat(document.getElementById('ru-growth').value) || 0;
            const schedule = parseFloat(document.getElementById('ru-schedule').value) || 0;
            
            // Расчет баллов для каждого KPI
            const engagementPoints = calculateKPI(engagement, 3, 5, 7, 30);
            const reachPoints = calculateKPI(reach, 40, 50, 70, 30);
            const materialsPoints = calculateKPI(materials, 10, 12, 15, 20);
            const growthPoints = calculateKPI(growth, 400, 500, 800, 10);
            const schedulePoints = calculateKPI(schedule, 90, 95, 100, 10);
            
            // Сначала считаем общий балл, потом переводим в процент
            const totalPoints = engagementPoints + reachPoints + materialsPoints + growthPoints + schedulePoints;
            
            // Итоговый процент выполнения (100 баллов = 100%)
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('ru-points').textContent = percentage + '%';
            document.getElementById('ru-status').textContent = status.text;
            document.getElementById('ru-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('ru-result').classList.add('show');
        }
        
        // Применить те же изменения ко всем остальным функциям
        function calculateKG() {
            const engagement = parseFloat(document.getElementById('kg-engagement').value) || 0;
            const reach = parseFloat(document.getElementById('kg-reach').value) || 0;
            const materials = parseFloat(document.getElementById('kg-materials').value) || 0;
            const growth = parseFloat(document.getElementById('kg-growth').value) || 0;
            const schedule = parseFloat(document.getElementById('kg-schedule').value) || 0;
            
            const engagementPoints = calculateKPI(engagement, 4, 5, 7, 30);
            const reachPoints = calculateKPI(reach, 25, 35, 50, 30);
            const materialsPoints = calculateKPI(materials, 6, 7, 9, 20);
            const growthPoints = calculateKPI(growth, 200, 300, 500, 10);
            const schedulePoints = calculateKPI(schedule, 90, 95, 100, 10);
            
            const totalPoints = engagementPoints + reachPoints + materialsPoints + growthPoints + schedulePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('kg-points').textContent = percentage + '%';
            document.getElementById('kg-status').textContent = status.text;
            document.getElementById('kg-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('kg-result').classList.add('show');
        }
        
        function calculateScriptwriter() {
            const quality = parseFloat(document.getElementById('scr-quality').value) || 0;
            const count = parseFloat(document.getElementById('scr-count').value) || 0;
            const accepted = parseFloat(document.getElementById('scr-accepted').value) || 0;
            const creative = parseFloat(document.getElementById('scr-creative').value) || 0;
            const deadline = parseFloat(document.getElementById('scr-deadline').value) || 0;
            
            const qualityPoints = calculateKPI(quality, 7, 8, 9, 30);
            const countPoints = calculateKPI(count, 6, 8, 10, 20);
            const acceptedPoints = calculateKPI(accepted, 80, 90, 95, 20);
            const creativePoints = calculateKPI(creative, 3, 4, 6, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            
            const totalPoints = qualityPoints + countPoints + acceptedPoints + creativePoints + deadlinePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('scr-points').textContent = percentage + '%';
            document.getElementById('scr-status').textContent = status.text;
            document.getElementById('scr-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('scr-result').classList.add('show');
        }
        
        function calculateOperator() {
            const time = parseFloat(document.getElementById('op-time').value) || 0;
            const count = parseFloat(document.getElementById('op-count').value) || 0;
            const quality = parseFloat(document.getElementById('op-quality').value) || 0;
            const creativity = parseFloat(document.getElementById('op-creativity').value) || 0;
            const deadline = parseFloat(document.getElementById('op-deadline').value) || 0;
            
            // Для времени - инвертируем (меньше = лучше)
            const timeValue = time > 0 ? Math.max(0, 2 - time) : 0;
            const timePoints = calculateKPI(timeValue, 0.5, 1, 1.5, 30);
            const countPoints = calculateKPI(count, 6, 8, 10, 20);
            const qualityPoints = calculateKPI(quality, 7, 8, 9, 20);
            const creativityPoints = calculateKPI(creativity, 7, 8, 9, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            
            const totalPoints = timePoints + countPoints + qualityPoints + creativityPoints + deadlinePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('op-points').textContent = percentage + '%';
            document.getElementById('op-status').textContent = status.text;
            document.getElementById('op-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('op-result').classList.add('show');
        }
        
        function calculateSMM() {
            const quality = parseFloat(document.getElementById('smm-quality').value) || 0;
            const growth = parseFloat(document.getElementById('smm-growth').value) || 0;
            const stories = parseFloat(document.getElementById('smm-stories').value) || 0;
            const reports = parseFloat(document.getElementById('smm-reports').value) || 0;
            const schedule = parseFloat(document.getElementById('smm-schedule').value) || 0;
            
            const qualityPoints = calculateKPI(quality, 70, 80, 90, 30);
            const growthPoints = calculateKPI(growth, 8, 10, 15, 30);
            const storiesPoints = calculateKPI(stories, 12, 15, 20, 20);
            const reportsPoints = calculateKPI(reports, 80, 90, 95, 10);
            const schedulePoints = calculateKPI(schedule, 90, 95, 100, 10);
            
            const totalPoints = qualityPoints + growthPoints + storiesPoints + reportsPoints + schedulePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('smm-points').textContent = percentage + '%';
            document.getElementById('smm-status').textContent = status.text;
            document.getElementById('smm-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('smm-result').classList.add('show');
        }
        
        function calculateCommerce() {
            const revenue = parseFloat(document.getElementById('com-revenue').value) || 0;
            const meetings = parseFloat(document.getElementById('com-meetings').value) || 0;
            const conversion = parseFloat(document.getElementById('com-conversion').value) || 0;
            const deadline = parseFloat(document.getElementById('com-deadline').value) || 0;
            const reports = parseFloat(document.getElementById('com-reports').value) || 0;
            
            const revenuePoints = calculateKPI(revenue, 2000, 2500, 3500, 40);
            const meetingsPoints = calculateKPI(meetings, 2, 3, 5, 20);
            const conversionPoints = calculateKPI(conversion, 25, 30, 40, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            const reportsPoints = calculateKPI(reports, 80, 90, 95, 10);
            
            const totalPoints = revenuePoints + meetingsPoints + conversionPoints + deadlinePoints + reportsPoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('com-points').textContent = percentage + '%';
            document.getElementById('com-status').textContent = status.text;
            document.getElementById('com-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('com-result').classList.add('show');
        }
        
        function calculateFactchecker() {
            const coverage = parseFloat(document.getElementById('fact-coverage').value) || 0;
            const quality = parseFloat(document.getElementById('fact-quality').value) || 0;
            const timing = parseFloat(document.getElementById('fact-timing').value) || 0;
            
            const coveragePoints = calculateKPI(coverage, 95, 100, 100, 40);
            const qualityPoints = calculateKPI(quality, 70, 80, 90, 30);
            const timingPoints = calculateKPI(timing, 85, 95, 100, 30);
            
            const totalPoints = coveragePoints + qualityPoints + timingPoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('fact-points').textContent = percentage + '%';
            document.getElementById('fact-status').textContent = status.text;
            document.getElementById('fact-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('fact-result').classList.add('show');
        }
        
        // Сценарист
        function calculateScriptwriter() {
            const quality = parseFloat(document.getElementById('scr-quality').value) || 0;
            const count = parseFloat(document.getElementById('scr-count').value) || 0;
            const accepted = parseFloat(document.getElementById('scr-accepted').value) || 0;
            const creative = parseFloat(document.getElementById('scr-creative').value) || 0;
            const deadline = parseFloat(document.getElementById('scr-deadline').value) || 0;
            
            const qualityPoints = calculateKPI(quality, 7, 8, 9, 30);
            const countPoints = calculateKPI(count, 6, 8, 10, 20);
            const acceptedPoints = calculateKPI(accepted, 80, 90, 95, 20);
            const creativePoints = calculateKPI(creative, 3, 4, 6, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            
            const totalPoints = qualityPoints + countPoints + acceptedPoints + creativePoints + deadlinePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('scr-points').textContent = percentage + '%';
            document.getElementById('scr-status').textContent = status.text;
            document.getElementById('scr-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('scr-result').classList.add('show');
        }
        
        // Оператор
        function calculateOperator() {
            const time = parseFloat(document.getElementById('op-time').value) || 0;
            const count = parseFloat(document.getElementById('op-count').value) || 0;
            const quality = parseFloat(document.getElementById('op-quality').value) || 0;
            const creativity = parseFloat(document.getElementById('op-creativity').value) || 0;
            const deadline = parseFloat(document.getElementById('op-deadline').value) || 0;
            
            // Для времени - инвертируем (меньше = лучше)
            const timeValue = time > 0 ? Math.max(0, 2 - time) : 0;
            const timePoints = calculateKPI(timeValue, 0.5, 1, 1.5, 30);
            const countPoints = calculateKPI(count, 6, 8, 10, 20);
            const qualityPoints = calculateKPI(quality, 7, 8, 9, 20);
            const creativityPoints = calculateKPI(creativity, 7, 8, 9, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            
            const totalPoints = timePoints + countPoints + qualityPoints + creativityPoints + deadlinePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('op-points').textContent = percentage + '%';
            document.getElementById('op-status').textContent = status.text;
            document.getElementById('op-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('op-result').classList.add('show');
        }
        
        // SMM
        function calculateSMM() {
            const quality = parseFloat(document.getElementById('smm-quality').value) || 0;
            const growth = parseFloat(document.getElementById('smm-growth').value) || 0;
            const stories = parseFloat(document.getElementById('smm-stories').value) || 0;
            const reports = parseFloat(document.getElementById('smm-reports').value) || 0;
            const schedule = parseFloat(document.getElementById('smm-schedule').value) || 0;
            
            const qualityPoints = calculateKPI(quality, 70, 80, 90, 30);
            const growthPoints = calculateKPI(growth, 8, 10, 15, 30);
            const storiesPoints = calculateKPI(stories, 12, 15, 20, 20);
            const reportsPoints = calculateKPI(reports, 80, 90, 95, 10);
            const schedulePoints = calculateKPI(schedule, 90, 95, 100, 10);
            
            const totalPoints = qualityPoints + growthPoints + storiesPoints + reportsPoints + schedulePoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('smm-points').textContent = percentage + '%';
            document.getElementById('smm-status').textContent = status.text;
            document.getElementById('smm-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('smm-result').classList.add('show');
        }
        
        // Коммерция
        function calculateCommerce() {
            const revenue = parseFloat(document.getElementById('com-revenue').value) || 0;
            const meetings = parseFloat(document.getElementById('com-meetings').value) || 0;
            const conversion = parseFloat(document.getElementById('com-conversion').value) || 0;
            const deadline = parseFloat(document.getElementById('com-deadline').value) || 0;
            const reports = parseFloat(document.getElementById('com-reports').value) || 0;
            
            const revenuePoints = calculateKPI(revenue, 2000, 2500, 3500, 40);
            const meetingsPoints = calculateKPI(meetings, 2, 3, 5, 20);
            const conversionPoints = calculateKPI(conversion, 25, 30, 40, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            const reportsPoints = calculateKPI(reports, 80, 90, 95, 10);
            
            const totalPoints = revenuePoints + meetingsPoints + conversionPoints + deadlinePoints + reportsPoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('com-points').textContent = percentage + '%';
            document.getElementById('com-status').textContent = status.text;
            document.getElementById('com-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('com-result').classList.add('show');
        }
        
        // Фактчекер
        function calculateFactchecker() {
            const coverage = parseFloat(document.getElementById('fact-coverage').value) || 0;
            const quality = parseFloat(document.getElementById('fact-quality').value) || 0;
            const timing = parseFloat(document.getElementById('fact-timing').value) || 0;
            
            const coveragePoints = calculateKPI(coverage, 95, 100, 100, 40);
            const qualityPoints = calculateKPI(quality, 70, 80, 90, 30);
            const timingPoints = calculateKPI(timing, 85, 95, 100, 30);
            
            const totalPoints = coveragePoints + qualityPoints + timingPoints;
            const percentage = Math.round(totalPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('fact-points').textContent = percentage + '%';
            document.getElementById('fact-status').textContent = status.text;
            document.getElementById('fact-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('fact-result').classList.add('show');
        }
        
        // Оператор
        function calculateOperator() {
            const time = parseFloat(document.getElementById('op-time').value) || 0;
            const count = parseFloat(document.getElementById('op-count').value) || 0;
            const quality = parseFloat(document.getElementById('op-quality').value) || 0;
            const creativity = parseFloat(document.getElementById('op-creativity').value) || 0;
            const deadline = parseFloat(document.getElementById('op-deadline').value) || 0;
            
            // Для времени - меньше лучше (инвертируем)
            const timePoints = calculateKPI(2 - time, 0.5, 1, 1.5, 30);
            const countPoints = calculateKPI(count, 6, 8, 10, 20);
            const qualityPoints = calculateKPI(quality, 7, 8, 9, 20);
            const creativityPoints = calculateKPI(creativity, 7, 8, 9, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            
            const totalWeightedPoints = 
                timePoints * 0.3 + 
                countPoints * 0.2 + 
                qualityPoints * 0.2 + 
                creativityPoints * 0.2 + 
                deadlinePoints * 0.1;
            
            const percentage = Math.round(totalWeightedPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('op-points').textContent = percentage + '%';
            document.getElementById('op-status').textContent = status.text;
            document.getElementById('op-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('op-result').classList.add('show');
        }
        
        // SMM
        function calculateSMM() {
            const quality = parseFloat(document.getElementById('smm-quality').value) || 0;
            const growth = parseFloat(document.getElementById('smm-growth').value) || 0;
            const stories = parseFloat(document.getElementById('smm-stories').value) || 0;
            const reports = parseFloat(document.getElementById('smm-reports').value) || 0;
            const schedule = parseFloat(document.getElementById('smm-schedule').value) || 0;
            
            const qualityPoints = calculateKPI(quality, 70, 80, 90, 30);
            const growthPoints = calculateKPI(growth, 8, 10, 15, 30);
            const storiesPoints = calculateKPI(stories, 12, 15, 20, 20);
            const reportsPoints = calculateKPI(reports, 80, 90, 95, 10);
            const schedulePoints = calculateKPI(schedule, 90, 95, 100, 10);
            
            const totalWeightedPoints = 
                qualityPoints * 0.3 + 
                growthPoints * 0.3 + 
                storiesPoints * 0.2 + 
                reportsPoints * 0.1 + 
                schedulePoints * 0.1;
            
            const percentage = Math.round(totalWeightedPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('smm-points').textContent = percentage + '%';
            document.getElementById('smm-status').textContent = status.text;
            document.getElementById('smm-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('smm-result').classList.add('show');
        }
        
        // Коммерция
        function calculateCommerce() {
            const revenue = parseFloat(document.getElementById('com-revenue').value) || 0;
            const meetings = parseFloat(document.getElementById('com-meetings').value) || 0;
            const conversion = parseFloat(document.getElementById('com-conversion').value) || 0;
            const deadline = parseFloat(document.getElementById('com-deadline').value) || 0;
            const reports = parseFloat(document.getElementById('com-reports').value) || 0;
            
            const revenuePoints = calculateKPI(revenue, 2000, 2500, 3500, 40);
            const meetingsPoints = calculateKPI(meetings, 2, 3, 5, 20);
            const conversionPoints = calculateKPI(conversion, 25, 30, 40, 20);
            const deadlinePoints = calculateKPI(deadline, 85, 95, 100, 10);
            const reportsPoints = calculateKPI(reports, 80, 90, 95, 10);
            
            const totalWeightedPoints = 
                revenuePoints * 0.4 + 
                meetingsPoints * 0.2 + 
                conversionPoints * 0.2 + 
                deadlinePoints * 0.1 + 
                reportsPoints * 0.1;
            
            const percentage = Math.round(totalWeightedPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('com-points').textContent = percentage + '%';
            document.getElementById('com-status').textContent = status.text;
            document.getElementById('com-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('com-result').classList.add('show');
        }
        
        // Фактчекер
        function calculateFactchecker() {
            const coverage = parseFloat(document.getElementById('fact-coverage').value) || 0;
            const quality = parseFloat(document.getElementById('fact-quality').value) || 0;
            const timing = parseFloat(document.getElementById('fact-timing').value) || 0;
            
            const coveragePoints = calculateKPI(coverage, 95, 100, 100, 40);
            const qualityPoints = calculateKPI(quality, 70, 80, 90, 30);
            const timingPoints = calculateKPI(timing, 85, 95, 100, 30);
            
            const totalWeightedPoints = 
                coveragePoints * 0.4 + 
                qualityPoints * 0.3 + 
                timingPoints * 0.3;
            
            const percentage = Math.round(totalWeightedPoints);
            
            const status = getStatus(percentage);
            const bonus = getBonus(percentage);
            
            document.getElementById('fact-points').textContent = percentage + '%';
            document.getElementById('fact-status').textContent = status.text;
            document.getElementById('fact-bonus').textContent = bonus.toLocaleString() + ' сом';
            document.getElementById('fact-result').classList.add('show');
        }
        
        // Функции экспорта
        function exportToExcel() {
            alert('Функция экспорта в Excel будет добавлена в следующей версии');
        }
        
        function exportToPDF() {
            window.print();
        }
        
        function printReport() {
            window.print();
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            // Показать первую секцию по умолчанию
            showPosition('editor-ru');
        });
    </script>
</body>
</html>
